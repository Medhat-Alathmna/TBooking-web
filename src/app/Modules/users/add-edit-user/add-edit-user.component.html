<app-loading *ngIf="loading" display="full"></app-loading>
<p-toast position="top-right"></p-toast>
<p-confirmDialog containerStyleClass="vw" acceptButtonStyleClass="p-button-danger" acceptIcon="pi pi-trash"></p-confirmDialog>
<app-sidebar [display]="display" (displayChange)="onHide()">
    <div header>
        <div class="flex justify-content-between flex-wrap ">
            <div *ngIf="detailMode" class="flex align-items-center justify-content-center   ">
                <div class="flex-initial flex align-items-center justify-content-center mx-2">
                    <button pButton pRipple type="button" icon="pi pi-times" (click)="onHide()"
                        class="p-button-rounded p-button-secondary p-button-lg p-button-text btn-white "></button>
                </div>
                <div class="flex align-items-center justify-content-center border-break"></div>
                <div class="flex-initial flex align-items-center justify-content-center px-3">
                    <i class="pi pi-calendar text-100 text-3xl " [class]="'css.mr-2'|translate"></i>
                    <entity-viewer
                        [entity]="{type:'text',title:'CREATION DATE' | translate,value:this.selectedUser.createdAt}"
                        [darkMode]="true"></entity-viewer>
                </div>
            </div>


            <div *ngIf="!detailMode" class="flex align-items-center justify-content-center   ">

                <div class="flex-initial flex align-items-center justify-content-center mx-2">
                    <button pButton (click)="onHide()" pRipple type="button" icon="pi pi-times"
                        class="p-button-rounded p-button-secondary p-button-lg p-button-text btn-white "></button>
                </div>
                <div class="flex align-items-center justify-content-center border-break"></div>

                <div class="flex-initial flex align-items-center justify-content-center px-3">
                    <span class="text-3xl text-white " translate>Add User </span>

                </div>
            </div>
            <div class="flex align-items-center justify-content-center mx-2 ">
                    <div class="flex align-items-center justify-content-center mx-2 ">
                        <button *ngIf="detailMode" (click)="menu.toggle($event)" pButton pRipple type="button"
                            icon="pi pi-ellipsis-v"
                            class="p-button-rounded mr-2 p-button-secondary p-button-lg p-button-text btn-white "></button>
                        <p-menu #menu id="meetingActinos" styleClass="meetingActinos" [popup]="true" appendTo="body"
                            [model]="acions"></p-menu>
                            <button *ngIf="!detailMode" pButton [disabled]="form?.invalid || !selectedUser.username ||!selectedUser.email || ! selectedUser.password || !selectedUser.confirmPassword || !selectRold" pRipple type="button"
                            [label]="'Save'|translate" icon="pi pi-check " (click)="createUser()"
                            class="p-button-rounded p-button-outlined p-button-secondary2  p-button-lg text-btn "></button>
                            <button *ngIf="detailMode" pButton [disabled]="form?.invalid || !selectedUser.username ||!selectedUser.email  || !selectRold" pRipple type="button"
                            [label]="'Save'|translate" icon="pi pi-check " (click)="updateUser()"
                            class="p-button-rounded p-button-outlined p-button-secondary2  p-button-lg text-btn "></button>
                    </div>

            </div>
        </div>
    </div>
    <form #form="ngForm" body class="px-5 ">
        <div class="grid ">
            <div class="col-12 pb-4">
                <span class="text-3xl ont-semibold font-bold" translate>User Details </span>
            </div>
            <div class="lg:col-6 sm:col-12">
                <app-input [(ngModel)]="selectedUser.username" name="username" [title]="'User Name'|translate" [required]="true"></app-input>
            </div>
            <div class="lg:col-6 sm:col-12">
                <app-input type="email" [(ngModel)]="selectedUser.email" name="email" [title]="'Email'|translate" [required]="true"></app-input>
            </div>
            <div class="lg:col-6 sm:col-12">
                <app-input type="text" [(ngModel)]="selectedUser.password" name="password" [title]="'Password'|translate" [required]="true"></app-input>
            </div>
            <div class="lg:col-6 sm:col-12">
                <app-input type="text" [(ngModel)]="selectedUser.confirmPassword" name="confirmPassword" [title]="'Confirm Password'|translate" [required]="true"></app-input>
            </div>
            <div class="lg:col-6 sm:col-12">
                <app-input type="text" [(ngModel)]="selectedUser.phone" [title]="'Phone'|translate" name="phone"></app-input>
            </div>
            <!-- <div class="lg:col-4 sm:col-6">
                <app-input type="text" [(ngModel)]="selectedUser.address" name="title" title="Address" [required]="false"></app-input>
            </div> -->
            <div class="lg:col-6 sm:col-12">
                <!-- <app-dropdown [(ngModel)]="selectRold" optionLabel="name" optionValue="id" [required]="true" name="selectRold" [filter]="false"
                    title="Role" [data]="roles" [showColor]="false"></app-dropdown> -->
                    <div class="block my-1">
                        <ng-container >
                            <div class="text-lg font-semibold mb-2">
                                {{'Role'|translate}}
                            </div>
                        </ng-container>
                        <p-dropdown *ngIf="!roleMode" [required]="true" appendTo="body" [filter]="true" [options]="roles" placeholder="Select a Role" (onChange)="selectRole($event.value)"
                        optionLabel="name"></p-dropdown>
                        <p-button *ngIf="roleMode" [label]="selectRold?.name" [style]="{'width': '46vw'}" (click)="roleMode=false" styleClass="p-button-outlined p-button-success"></p-button>

                    </div>
            </div>
           
        </div>
    </form>


</app-sidebar>