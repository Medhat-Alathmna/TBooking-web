<app-loading *ngIf="loading" display="full"></app-loading>
<div class="grid layout-dashboard relative">
    <!-- <div class="col-6 card">
        <h5> {{"Total of today's orders"| translate}}</h5>
        <p-chart type="bar" [data]="toDayChart" [options]="basicOptions"></p-chart>
    </div> -->
    <div class="col-12 lg:col-6">
        <div class="grid flex-column grid-nogutter">
            <div class="col-12">
                <div class="card cardColor">
                    <h5>{{"Total of today's orders"| translate}}</h5>
                    <p-chart type="bar" *ngIf="results" [data]="toDayChart" [options]="basicOptions"
                        height="51vh"></p-chart>
                    <div style="height:51vh" *ngIf="!results" class="text-center">
                        <h4 style="padding-top: 21vh;">
                            <i class="mx-2 pi pi-exclamation-circle text-xl font-bold"
                                style=" color:var(--danger)  !important;"></i>
                            No Data to View Chart
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-6">
        <div class="grid flex-column grid-nogutter">
            <div class="col-12">
                <div class="card cardColor">
                    <h5>{{"Today's Cash"| translate}}</h5>
                    <p-chart type="bar" *ngIf="results" [data]="todayCashChart" [options]="basicOptions"
                        height="51vh"></p-chart>
                    <div style="height:51vh" *ngIf="!results" class="text-center">
                        <h4 style="padding-top: 21vh;">
                            <i class="mx-2 pi pi-exclamation-circle text-xl font-bold"
                                style=" color:var(--danger)  !important;"></i>
                            No Data to View Chart
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-6">
        <div class="grid flex-column grid-nogutter">
            <div class="col-12">
                <div class="card cardColor">
                    <h5>{{"Orders Status"| translate}}</h5>
                    <p-chart type="bar" *ngIf="results" [data]="orderStutsChart" [options]="basicOptions"
                        height="51vh"></p-chart>
                    <div style="height:51vh" *ngIf="!results" class="text-center">
                        <h4 style="padding-top: 21vh;">
                            <i class="mx-2 pi pi-exclamation-circle text-xl font-bold"
                                style=" color:var(--danger)  !important;"></i>
                            No Data to View Chart
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>
<div class="w-screen">
    <div style="right: 5vw;top: 74vh;" class="fixed">
        <p-speedDial buttonClassName="dashbored-btn" showIcon="pi pi-filter " [model]="items"></p-speedDial>
    </div>
</div>
<app-modal [(display)]="dashboardDatesDialog" class="modal-sm">
    <div body>
        <div class="grid">
            <div class=" col-6 mt-3">
                <div class="p-inputgroup">
                    <span class="p-float-label">
                        <p-calendar dateFormat="dd-mm-yy" [(ngModel)]="fromDate" appendTo="body"
                            [style]="{width: '100%'}" [showIcon]="true" yearNavigator=true>
                        </p-calendar>
                        <label for="vat-input">From Date</label>
                    </span>
                </div>
            </div>
            <div class=" col-6 mt-3">
                <div class="p-inputgroup">
                    <span class="p-float-label">
                        <p-calendar dateFormat="dd-mm-yy" appendTo="body" [(ngModel)]="toDate" [style]="{width: '100%'}"
                            [showIcon]="true" yearNavigator=true>
                        </p-calendar>
                        <label for="vat-input">To Date</label>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div footer>
        <button pButton pRipple (click)="dashboardDatesDialog=false" type="button" label=" {{'Cancel' |translate}}"
            icon='pi pi-times {{"css.mr-2"|translate}}' class="p-button-secondary p-button-outlined"></button>
        <button pButton pRipple (click)=" count();dashboardDatesDialog=false" type="button"
            label=" {{'Apply' |translate}}" class="p-button-primary"></button>
    </div>
</app-modal>
<app-modal [(display)]="dashboardDetails" class="modal-lg">
    <div body>
        <p-accordion *ngFor="let body of results.entities">
            <!-- <p-accordionTab [header]="body.orderNo +body.appointment.customer.firstName">
                <p >{{body.services}}</p>
            </p-accordionTab> -->
            <p-accordionTab>
                <ng-template pTemplate="header">
                        <span pTooltip="{{'Customer'|translate}}"
                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom" class="vertical-align-middle py-2">{{ body.appointment.customer?.firstName}} {{ body.appointment.customer?.middleName}} {{ body.appointment.customer?.lastName}}</span>
                        <span pTooltip="{{'Order No.'|translate}}"
                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom" class="vertical-align-middle ">{{body.orderNo}}</span>
                        <span pTooltip="{{'Creation Date'|translate}}"
                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom" class="vertical-align-middle py-2">{{body.createdAt  | date: 'dd/MM/yyyy hh:mm A'}}</span>
                        <span pTooltip="{{'Cash'|translate}}"
                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom" class="vertical-align-middle">{{body.cash}} {{jod}}</span>
                        <span pTooltip="{{'Cash'|translate}}"
                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom" [class]="body.status">{{body.status |translate}} </span>
                </ng-template>
                <ng-template pTemplate="content">
                    <div *ngFor="let item of body.services;let i =index "
                    class="flex justify-content-between flex-wrap mb-2">
                    <div class=" text-base font-semibold "
                        style="display: flex;align-items: center;justify-content: space-around;width: 23vw">
                        <div class="pi pi-circle-fill text-primary text-xs pt-2"></div>
                        <span class="  font-bold "> {{item[lang]}} </span>
                        <span class="  font-bold">
                            <input type="number" name="price{{i}}" pInputText [(ngModel)]="item.price" disabled />

                        </span>
                    </div>
                   
                </div>
                <p-divider *ngIf="body.products?.length"></p-divider>
                        <div *ngIf="body.products?.length" class="mt-3">
                            <p-table [value]="body.products" [tableStyle]="{'width.%': 100}">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th translate>Product Name</th>
                                        <th translate>Price</th>
                                        <th translate>Quantity</th>
                                        <th translate>Brand</th>
                                        <th translate>Total</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-product let-s="rowIndex">
                                    <tr>
                                        <td class=" px-2 font-bold">{{ product.name }}</td>
                                        <td>
                                            <span class=" px-2 font-bold">
                                                <input type="number" [value]="product.price" disabled
                                                    [ngModelOptions]="{standalone: true}" pInputText
                                                    [(ngModel)]="product.price" />
                                            </span>
                                        </td>
                                        <td>
                                            <span class="  font-bold">
                                                <input type="number" name="qty{{s}}" disabled pInputText
                                                    [(ngModel)]="product.qty" />
                                            </span>
                                        </td>
                                        <td>
                                            <span class="  font-bold">
                                                {{product?.brand?.name}} 
                                            </span>
                                        </td>
                                        <td>
                                            <span class="  font-bold">
                                                {{product.price*product.qty}} {{jod}}
                                            </span>
                                        </td>
                                      
                                      
                                    </tr>
                                </ng-template>
                            </p-table>
                          
                        </div>
                </ng-template>
            </p-accordionTab>
        </p-accordion>
    </div>
   
</app-modal>