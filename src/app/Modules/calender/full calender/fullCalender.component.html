<p-tabMenu class="col-12" [model]="tabIndex" [activeItem]="tabIndex[0]"></p-tabMenu>

<div *ngIf="tabSelected=='calender'" class="grid ">
    <div class="lg:col-8 sm:col-12 ">
        <div #carddH style="height: 70vh;" class="card p-0 ">
            <div class="flex justify-content-between flex-wrap p-3">
                <div class="flex align-items-center justify-content-center  ">
                    <div (click)="getCurrentDay()" class="flex align-items-center justify-content-center  ">
                        <button pButton pRipple type="button" [label]="'Today'|translate"
                            class=" p-button-outlined p-button-secondary2 "></button>
                    </div>
                    <div class="flex align-items-center justify-content-center mx-3 font-semibold text-700">
                        <span class="text-2xl">{{currentDate}}</span>
                    </div>
                    <div style="direction: initial;" class="flex align-items-center justify-content-center  ">
                        <button pButton pRipple type="button" icon="pi pi-chevron-left " (click)="getNext()"
                            class=" p-button-text p-button-secondary"></button>
                        <button pButton pRipple type="button" icon="pi pi-chevron-right" (click)="getPrev()"
                            class=" p-button-text p-button-secondary"></button>

                    </div>
                </div>
                <div class="flex align-items-center justify-content-center  ">
                    <div class="flex align-items-center justify-content-center ">
                        <button pButton pRipple type="button" [label]="selectedViewType| translate"
                            icon='pi pi-chevron-down {{"css.ml-2"|translate}} ' iconPos="right"
                            class=" p-button-outlined p-button-secondary2 "
                            (click)="calendarMenu.toggle($event)"></button>
                        <p-menu #calendarMenu [popup]="true" [model]="viewTypes"></p-menu>

                    </div>

                </div>
            </div>

            <full-calendar #calendar [options]="calendarOptions"></full-calendar>
        </div>


    </div>
    <div class="lg:col-4 sm:col-12 lg:mt-0 sm:mt-7 ">
        <div height="carddH?.offsetHeight+60">
            <div class="card p-0">
                <p-tabView>
                    <p-tabPanel>
                        <ng-template pTemplate="header">
                            <span>{{'Approved Appointments'|translate}}</span>
                            <p-badge class="ml-2" [value]="approvedAppointments?.length"></p-badge>

                        </ng-template>
                        <div style="max-height: 68vh;" class="overflow-y-auto" *ngFor="let appo of approvedAppointments">
                            <div class="mb-3 font-semibold text-lg text-500">
                                <div class="block pointer" (click)="getAppointment(appo.id)">
                                    <i [class]="'css.mr-2' | translate" style="color: green;"
                                        class="pi pi-circle-fill"></i>
                                    <span>{{appo.attributes?.customer?.firstName}}
                                        {{appo.attributes?.customer?.middleName}}
                                        {{appo.attributes?.customer?.lastName}}</span>
                                </div>
                                <div [class]="'css.ml-4 ' | translate "
                                    style="justify-content: space-around; display: flex;padding-top: 10px">
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-tag" showDelay="1000"
                                        hideDelay="1000" tooltipPosition="bottom" pTooltip="Appointment No."
                                        [value]="appo.attributes?.number"></p-tag>
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-user" pTooltip="Employment"
                                        showDelay="1000" hideDelay="1000" tooltipPosition="bottom"
                                        [value]="appo?.attributes?.employee?.data?.attributes?.username"></p-tag>
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-clock" tooltipPosition="bottom"
                                        showDelay="1000" hideDelay="1000" pTooltip="Time"
                                        [value]="appo.attributes.fromDate+'->' +appo.attributes.toDate"></p-tag>

                                </div>
                            </div>
                        </div>
                    </p-tabPanel>

                    <p-tabPanel>
                        <ng-template pTemplate="header">
                            <span>{{'Unapproved Appointments'|translate}}</span>
                            <p-badge class="pl-1" [value]="unapprovedAppoit?.length"></p-badge>
                        </ng-template>
                        <div style="max-height: 68vh;" class="overflow-y-auto" *ngFor="let appo of unapprovedAppoit">
                            <div class="mb-3 font-semibold text-lg text-500">
                                <div class="block pointer" (click)="getAppointment(appo.id)">
                                    <i [class]="'css.mr-2' | translate" style="color: black;"
                                        class="pi pi-circle-fill"></i>
                                    <span>{{appo.attributes?.customer?.firstName}}
                                        {{appo.attributes?.customer?.middleName}}
                                        {{appo.attributes?.customer?.lastName}}</span>
                                </div>
                                <div [class]="'css.ml-4 ' | translate "
                                    style="justify-content: space-around; display: flex;padding-top: 10px">
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-tag" showDelay="1000"
                                        hideDelay="1000" tooltipPosition="bottom" pTooltip="Appointment No."
                                        [value]="appo.attributes?.number"></p-tag>
                                    <!-- <p-tag styleClass="tag-secondary mx-2" icon="pi pi-user" pTooltip="Employment" showDelay="1000" hideDelay="1000"
                                        tooltipPosition="bottom" [value]="appo?.attributes?.employee?.data?.attributes?.username"></p-tag> -->
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-clock" tooltipPosition="bottom"
                                        showDelay="1000" hideDelay="1000" pTooltip="Time"
                                        [value]="appo.attributes.fromDate+'->' +appo.attributes.toDate"></p-tag>

                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel>
                        <ng-template pTemplate="header">
                            <span>{{'Completed Appointments'|translate}}</span>
                            <p-badge class="pl-1" [value]="completedAppoit?.length"></p-badge>
                        </ng-template>
                        <div style="max-height: 68vh;" class="overflow-y-auto" *ngFor="let appo of completedAppoit">
                            <div class="mb-3 font-semibold text-lg text-500">
                                <div class="block pointer" (click)="getAppointment(appo.id)">
                                    <i [class]="'css.mr-2' | translate" style="color: black;"
                                        class="pi pi-circle-fill"></i>
                                    <span>{{appo.attributes?.customer?.firstName}}
                                        {{appo.attributes?.customer?.middleName}}
                                        {{appo.attributes?.customer?.lastName}}</span>
                                </div>
                                <div [class]="'css.ml-4 ' | translate "
                                    style="justify-content: space-around; display: flex;padding-top: 10px">
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-tag" showDelay="1000"
                                        hideDelay="1000" tooltipPosition="bottom" pTooltip="Appointment No."
                                        [value]="appo.attributes?.number"></p-tag>
                                    <!-- <p-tag styleClass="tag-secondary mx-2" icon="pi pi-user" pTooltip="Employment" showDelay="1000" hideDelay="1000"
                                        tooltipPosition="bottom" [value]="appo?.attributes?.employee?.data?.attributes?.username"></p-tag> -->
                                    <p-tag styleClass="tag-secondary mx-2" icon="pi pi-clock" tooltipPosition="bottom"
                                        showDelay="1000" hideDelay="1000" pTooltip="Time"
                                        [value]="appo.attributes.fromDate+'->' +appo.attributes.toDate"></p-tag>

                                </div>
                            </div>
                        </div>
                    </p-tabPanel>
                    <i class="pi pi-exclamation-circle" showDelay="1000" tooltipPosition="bottom"
                        pTooltip="This are Appointments for a current day" style="font-size: 1.5rem"></i>

                </p-tabView>

            </div>
        </div>
        <div class="flex align-items-center justify-content-center m-2 pt-2">
            <button pButton pRipple type="button" icon="pi pi pi-plus " (click)="openAppoDeatils()"
                [label]="'New Appointment'| translate"
                class="p-button-rounded p-button-outlined p-button-secondary2 text-btn"></button>

        </div>

    </div>

</div>
<div *ngIf="tabSelected=='appointments'" >
    <app-appointments></app-appointments>
</div>

<app-add-appo *ngIf="showSppoSidebar" (refreshLish)="getCalender();getTodayAppo()" [appointment]="Appointment"
    [id]="id" [detailMode]="detailMode" [(display)]="showSppoSidebar"></app-add-appo>